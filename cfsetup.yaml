everything: &everything

  build:
    builddeps:
      - build-essential
      - git
      - libtool
      - m4
      - automake
      - libglib2.0-dev
      - libssl-dev
      - libbssl-fips-dev
      - libevent-dev
      - pandoc
      - postgresql
      - libpq-dev
      - rubygem-fpm
    post-cache:
      - .teamcity/test.sh
      - .teamcity/build.sh

  debian-package:
    builddeps:
      - build-essential
      - git
      - libtool
      - m4
      - automake
      - libglib2.0-dev
      - libssl-dev
      - libbssl-fips-dev
      - libevent-dev
      - pandoc
      - postgresql
      - libpq-dev
      - rubygem-fpm
    post-cache:
      - .teamcity/debian-package.sh

stretch: *everything
buster: *everything
bullseye: *everything
default-flavor: buster
